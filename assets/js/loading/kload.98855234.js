var e={isGmod:navigator.userAgent.toLowerCase().indexOf("valve")!==-1,loadingHooks:{},events:{},data:{demoMode:!1,volume:15,GameDetails:{},files:{downloaded:0,needed:1,total:1,downloadComplete:!1}},finishedStatuses:["Sending client info...","Client info sent!","Received all Lua files we needed!","No files to request!","Starting Lua..."],tmp:{ignoreLoadings:!1,lastFileDownloaded:null,statuses:[],progressRegex:/(\d+)\/(\d+)/}};e.emit=function(t){if(typeof e.events[t]<"u"){const a=[].slice.call(arguments);a.shift(),e.events[t].forEach(function(n){n.apply(null,a)})}};e.on=function(t,a){typeof e.events[t]>"u"&&(e.events[t]=[]),e.events[t].push(a)};e.on("GameDetails",function(t,a,n,d,o,i,l,s,f){e.data.GameDetails.servername=t,e.data.GameDetails.serverurl=a,e.data.GameDetails.mapname=n,e.data.GameDetails.maxplayers=d,e.data.GameDetails.steamid=o,e.data.GameDetails.gamemode=i,e.data.GameDetails.volume=l,e.data.GameDetails.language=s,e.data.GameDetails.gamemodeNice=f,text(".server-name",t),text(".server-url",a),text(".map",n),text(".mapname",n),text(".max-players",d),text(".steamid",o),text(".gamemode",i),text(".volume",l),text(".language",s),text(".gamemodeNice",f)});e.on("SetFilesTotal",function(t){e.data.files.total=t,text(".files-total",t)});e.on("SetFilesNeeded",function(t){e.data.files.needed=t,text(".files-needed",t)});e.getProgress=function(){const t=e.data.files.downloaded/e.data.files.needed;return{progress:e.data.files.downloadComplete?1:t,percentage:e.data.files.downloadComplete?100:Math.round(t*100)}};e.on("DownloadingFile",function(t){e.data.files.downloaded++,(e.data.files.needed<=0||e.data.files.downloaded>=e.data.files.needed)&&!e.data.demoMode&&SetFilesNeeded(e.data.files.downloaded+1),e.tmp.lastFileDownloaded=t,SetStatusChanged("Downloading "+t),text(".files-downloading",t),e.data.files.downloadComplete||e.emit("DownloadProgress",e.getProgress())});e.on("DownloadProgress",function(t){text(".files-downloaded",e.data.files.downloaded),text(".percentage",t.percentage+"%"),[].forEach.call(document.querySelectorAll(".loading-bar, .loading-bar--vertical"),function(a){a.classList.contains(".loading-bar--vertical")?a.style.height=t.percentage+"%":a.style.width=t.percentage+"%"})});e.on("SetStatusChanged",function(t){if(t.indexOf("Extracting")!==-1||t.indexOf("Retrieving")!==-1)return;const a=t.indexOf("Loading");a!==-1&&(t.indexOf(e.tmp.lastFileDownloaded)===-1&&(e.data.files.downloaded++,e.emit("DownloadProgress",e.getProgress())),t=t.substr(a)),text(".status",t),e.finishedStatuses.indexOf(t)!==-1&&(e.data.files.downloadComplete=!0,e.emit("DownloadProgress",{progress:1,percentage:100}))});e.init=function(){window.GameDetails=function(t,a,n,d,o,i,l,s){e.emit("GameDetails",t,a,n,d,o,i,l,s)},window.SetFilesTotal=function(t){e.emit("SetFilesTotal",t)},window.SetFilesNeeded=function(t){e.emit("SetFilesNeeded",t)},window.DownloadingFile=function(t){e.emit("DownloadingFile",t)},window.SetStatusChanged=function(t){e.emit("SetStatusChanged",t)}};
